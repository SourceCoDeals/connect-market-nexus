# Platform Changelog — February 24, 2026

**Period**: Feb 24, 2026 03:20 UTC – Feb 25, 2026 00:09 UTC (~21 hours)
**Total commits to main**: 100+ (including merges)
**Pull requests merged**: 27 (PRs #196–#222)
**SQL migrations**: 19 new migration files
**Branch (pending)**: `claude/sourceco-audit-framework-7m0TD` — CTO audit framework (11 commits, not yet merged)

---

## Table of Contents

1. [Database & Schema Changes](#1-database--schema-changes)
2. [AI Command Center (Chatbot)](#2-ai-command-center-chatbot)
3. [Admin UI & Tooling](#3-admin-ui--tooling)
4. [Buyer Management](#4-buyer-management)
5. [Deal Management](#5-deal-management)
6. [Document Management (DocuSeal)](#6-document-management-docuseal)
7. [PhoneBurner & Outreach](#7-phoneburner--outreach)
8. [Platform-Wide Fixes](#8-platform-wide-fixes)
9. [Unresolved Items & Known Issues](#9-unresolved-items--known-issues)
10. [PR Index](#10-pr-index)

---

## 1. Database & Schema Changes

### 19 SQL Migrations Applied

| Migration | Description | PR |
|-----------|-------------|-----|
| `20260305200000_remove_confidence_fields` | Drops `confidence`, `data_completeness`, `missing_fields` columns from `remarketing_buyers`, `enriched_contacts`, `remarketing_scores`, `enrichment_logs` | #196 |
| `20260306000000_deals_contact_fk_columns` | Adds FK columns on listings/deals for contact relationships | #199 |
| `20260306000000_p0_industry_tier_backfill_and_fixes` | Backfills industry tier data, fixes scoring weights | #199 |
| `20260306100000_docuseal_webhook_contact_fk` | Adds contact FK to DocuSeal webhook events | #199 |
| `20260306200000_profiles_remarketing_buyer_fk` | Links profiles to remarketing_buyers via FK | #199 |
| `20260306300000_remarketing_contacts_mirror_trigger` | Trigger to mirror unified contacts → legacy remarketing_buyer_contacts | #199 |
| `20260306400000_update_deal_creation_triggers` | Updates deal creation triggers for new FK structure | #199 |
| `20260310000000_contact_intelligence` | New tables for contact discovery: `enriched_contacts` extensions, Google search results, Apify/Prospeo integration | #197 |
| `20260310100000_ai_tools_schema_fixes` | Corrects column references used by AI Command Center tools | #215 |
| `20260311000000_contact_lists` | New `contact_lists` and `contact_list_items` tables for saved outreach lists | #211 |
| `20260311100000_enforce_valid_website_for_active_deals` | `is_valid_company_website()` SQL helper, auto-archive trigger for invalid websites | #219 |
| 5× Lovable auto-migrations (`050917`, `050937`, `050957`, `051019`, `051053`) | FK additions and type updates generated by Lovable platform | #200 |
| `205242` | Admin/contact list schema tweaks | Direct |
| `205711` | Additional schema adjustments | Direct |

### Key Schema Decisions

- **Confidence fields removed**: `confidence`, `data_completeness`, `missing_fields` were proxy fields never populated by real data. Removed from 4 tables to reduce noise.
- **Contact unification**: All new contact work targets the unified `contacts` table. Legacy `remarketing_buyer_contacts` references migrated in PRs #200, #199.
- **Website validation**: Active deals now require a valid company website (not placeholder/example domains). Existing invalid deals archived.

---

## 2. AI Command Center (Chatbot)

### System Prompt Overhaul (PRs #201–#210, #215, pending audit branch)

The AI chatbot system prompt was comprehensively rewritten across multiple PRs:

| Change | PR | Commit |
|--------|-----|--------|
| Add chatbot test runner to admin Testing hub (52 scenarios) | #201 | `7300a0e` |
| Fix "Failed to fetch" error + add external API health checks | #202 | `ba9618d` |
| Fix hallucination on industry queries + improve routing | #204 | `0b11d8e` |
| Add anti-hallucination rules, data formatting standards, scope rules | #204 | `b346790` |
| Align with unified contacts migration (remove legacy table refs) | #205 | `0e469a4` |
| Add behavioral rules 8–13 from master PRD review | #205 | `75bd77c` |
| Add AI Command Center tool tests + coverage config | #205 | `a456c1a` |
| Automate QA scenario testing with Run All + auto-validation | #206 | `ab9d5cc` |
| Fix deal industry filtering, buyer search, contact lookup | #208 | `dc15867` |
| Ensure chatbot searches ALL data fields on deals and buyers | #208 | `e96761c` |
| Add chat formatting rules + Rules & Guardrails admin tab | #210 | `08a6fd9` |
| Deep audit: 40+ test scenarios, ban emoji, fix buyer search crash | #210 | `68c1ecf` |
| Comprehensive AI Command Center & platform integration audit | #210 | `ba66f82` |
| Add `get_call_history` tool, fix buyer mixed-type crash, fix legacy table refs | #211 | `93fc7bc` |
| Add PRD integration tools: contact enrichment, PhoneBurner push, DocuSeal, stale deals | #212 | `f7949ea` |
| Add comprehensive AI tool suite: Google search, contact approval, proactive ops, deal conversion | #213 | `76a8997` |
| SQL migration for AI tools schema fixes + correct column references | #215 | `d3a9f51` |
| Fix duplicate capability entries in system prompt | #213 | `4c69535` |

### Tools Added to AI Command Center

| Tool | Purpose | PR |
|------|---------|-----|
| `enrich_buyer_contacts` | LinkedIn scraping + email enrichment via Apify/Prospeo | #212 |
| `push_to_phoneburner` | Add contacts to PhoneBurner dialer | #212 |
| `send_document` | Send NDA/fee agreement via DocuSeal | #212 |
| `get_document_engagement` | Track who viewed deal documents | #212 |
| `get_stale_deals` | Find deals with no recent activity | #212 |
| `google_search_companies` | Google search for companies/LinkedIn pages | #213 |
| `save_contacts_to_crm` | Save approved contacts to unified contacts table | #213 |
| `get_call_history` | PhoneBurner call history for a buyer | #211 |
| `get_analytics` | Pipeline health dashboards | Pending |
| `get_interest_signals` | Marketplace buyer interest events | Pending |
| `generate_pipeline_report` | Weekly/monthly pipeline reports | Pending |
| `get_outreach_status` | Deal-level outreach rollup | Pending |
| `generate_meeting_prep` | Meeting briefing generator | Pending |
| `draft_outreach_email` | Personalized outreach email drafter | Pending |
| `search_fireflies` | Fireflies transcript search | Pending |
| `get_score_breakdown` | Per-dimension scoring breakdown | Pending |
| `log_deal_activity` | Record activity events on deals | Pending |
| `get_current_user_context` | Current user profile/tasks/deals | Pending |
| `complete_deal_task` | Mark tasks as done | Pending |

> **Note**: Tools marked "Pending" are documented in the system prompt on the `claude/sourceco-audit-framework-7m0TD` branch but have not yet been merged to main.

### Behavioral Rules Added

1. **Anti-hallucination** (Rules 1–2): Never invent data, always use tool results only
2. **Tool usage** (Rule 2): Correct tool names, existence checks
3. **Data formatting** (Rule 3): Revenue as "$X.XM", states as 2-letter codes, multi-state queries use `states[]` array
4. **Scope rules** (Rule 4): "Active deals" = listings table, no external search unless asked
5. **Error handling** (Rules 5–12): Zero results, partial results, API failures
6. **Response formatting** (Rule 14): Bullet lists for pipeline/buyer responses, no emoji, structured output

---

## 3. Admin UI & Tooling

### New Pages

| Page | Route | PR | Description |
|------|-------|-----|-------------|
| AI Chatbot Test Runner | `/admin/testing` (Chatbot tab) | #201 | 52 QA scenarios, Run All automation, inline AI responses, auto-validation |
| Rules & Guardrails | `/admin/testing` (Rules tab) | #210 | View/manage all chatbot behavioral rules with severity levels |
| Document Tracking | `/admin/documents` | #213 | NDA and Fee Agreement status dashboard with search, filters, summary stats |
| Contact Lists | `/admin/contact-lists` | #211 | Saved outreach lists with PhoneBurner export |
| Universal Search | `Cmd+K` overlay | #214 | Search across deals, buyers, contacts, transcripts from anywhere |

### Admin UI Improvements

- **QA Test Runner**: Added "Run All" button, inline AI response display, auto-validation against expected answers, AbortController for cancel (#206, #209, #210)
- **ChatbotTestRunner fixes**: Fixed freeze on Run All, restored Manual badge, fixed Square icon import (#209)

---

## 4. Buyer Management

### New Features

| Feature | PR | Description |
|---------|-----|-------------|
| Add buyer to deal from deal detail | #220 | Dialog on History/Distribution tabs — existing buyer combobox + new buyer creation |
| Rebuild Buyer Contacts page | #211 | Multi-select, filters, stats dashboard, bulk actions |
| Contact lists + PhoneBurner export | #211, #222 | Create named lists, auto-navigate to list detail, "View Lists" button, export to PB |
| Buyer messages back button | #212 | Navigation improvement for BuyerMessages page |

### Bug Fixes

| Fix | PR | Commit |
|-----|-----|--------|
| Buyer CSV import: fallback to individual row inserts on batch failure | #207 | `6f08388` |
| Remove all auto-enrichment triggers (enrichment now explicit only) | #207 | `6f08388` |
| Buyer search crash: `.some()` on string fields | #218 | `f397750` |
| Buyer mixed-type crash in chatbot | #211 | `93fc7bc` |
| Token overflow on buyer search (prompt too long) | #218 | `f397750` |

---

## 5. Deal Management

### New Features

| Feature | PR | Description |
|---------|-----|-------------|
| Rename "All Deals" → "Active Deals" | #217 | All UI references updated: nav, sidebar, titles, tabs, buttons, toasts, badges, filters |
| Enforce valid company website | #219 | `is_valid_company_website()` SQL helper, auto-archive invalid listings, frontend validation on GP Partners and CapTarget flows |
| Archive placeholder deals | #219 | Archived fake/placeholder sites, soft-deleted pipeline deals |

### Lead Source Fixes

| Fix | PR | Commit |
|-----|-----|--------|
| GP Partners approval now sets `remarketing_status=active` | #221 | `0be8568` |
| All lead source approvals set `remarketing_status=active` | #221 | `0be8568` |
| AI navigation: `all_deals` → `active_deals` in enum and route map | #221 | `0be8568` |
| Fix GP Partners display in Active Deals | Direct | `8effbb0` |

---

## 6. Document Management (DocuSeal)

| Change | PR | Commit |
|--------|-----|--------|
| Add document tracking admin page | #213 | `4bf5f8a` |
| Clarify document feedback options | #216 | `0373f87` |
| Add zoom controls to signing modal | #213 | `70e2497` |
| Make signing modal read-friendly | Direct | `31b54f5` |
| Move Document Tracking to Buyers section | Direct | `3ece2ad` |
| Add document tracking selection UI | Direct | `8de28f9` |

---

## 7. PhoneBurner & Outreach

| Change | PR | Commit |
|--------|-----|--------|
| Fix scoring engine revenue quality + PhoneBurner integration overhaul | #203 | `17f0fcb` |
| Revenue-per-employee cross-validation in scoring | #203 | `17f0fcb` |
| Fix PhoneBurner webhook `custom_fields` key mismatch | #203 | `17f0fcb` |
| Improve OAuth token refresh flow | #203 | `17f0fcb` |
| Add 31 PhoneBurner integration tests + 8 scoring tests | #203 | `17f0fcb` |
| Add `push_to_phoneburner` chatbot tool | #212 | `f7949ea` |
| Improve list creation + PhoneBurner export discoverability | #222 | `5106a93` |
| Add contact lists with PB export | #211 | `9dbce0e` |

---

## 8. Platform-Wide Fixes

### Data Architecture

| Change | PR | Commit |
|--------|-----|--------|
| Close FK gaps on deals, DocuSeal, profiles | #199 | `685bf60` |
| Fix 3 remaining `remarketing_buyer_contacts` references | #200 | `6537e68` |
| Add data architecture audit v2 report + runnable SQL script | #199 | `99b2746` |
| Remove confidence/data_completeness/missing_fields from platform | #196 | `87faa1f` |

### Contact Intelligence (New System)

| Change | PR | Commit |
|--------|-----|--------|
| Apify LinkedIn scraping + Prospeo email enrichment | #197 | `362e1b5` |
| Google company discovery with AI extraction | #197 | `362e1b5` |
| 253 new tests for contact intelligence | #197 | `362e1b5` |
| New edge functions: `find-contacts`, `discover-companies` | #197 | `362e1b5` |

### Configuration

| Change | PR | Commit |
|--------|-----|--------|
| Add `ai-command-center` to config.toml | #198 | `63dcec9` |
| Improve AI chat bubble colors | Direct | `bacf3ea` |
| Draggable chat + icon update | Direct | `6aa3b07` |

---

## 9. Unresolved Items & Known Issues

### Vague Commits on Main

21 commits with message "Changes" or "Lovable update" were pushed directly to main (not via PRs). These are Lovable platform auto-commits that update `supabase/types.ts` and UI components. They lack descriptive messages but are typically:
- Auto-generated type file updates (`src/integrations/supabase/types.ts`)
- UI component adjustments from the Lovable visual editor
- Schema migration files from Lovable's migration generator

### PRs With Missing Descriptions

The following PRs were merged with template-only or empty bodies:
- **PR #199**: "data-relationship-audit" — no description
- **PR #204**: "review-admin-testing-docs" — no description
- **PR #205**: "review-admin-testing-docs" — no description
- **PR #208**: "deal-industry-filtering" — no description
- **PR #215**: "review-admin-testing-docs" — no description

These PRs had meaningful commit messages but the PR body was not filled out.

### Multi-Merge Branch

The `claude/review-admin-testing-docs-Rc6ma` branch was merged **7 times** (PRs #201, #202, #204, #205, #206, #209, #210, #215) as a long-running iterative branch. Each merge added incremental chatbot and testing improvements. This is a non-standard pattern — typically a branch is merged once. The incremental approach was used because the AI Command Center work required rapid iteration with testing between each batch.

### Pending Branch

`claude/sourceco-audit-framework-7m0TD` (11 commits, not yet merged) contains:
- CTO-level audit framework with 27 test scenarios
- System prompt overhaul (~340 lines added)
- 13 new tool capability descriptions
- Complete field meanings & business context guide
- Known tool limitations documentation
- SourceCo business model & terminology sections

---

## 10. PR Index

| PR | Title | Branch | Merged |
|----|-------|--------|--------|
| #196 | Remove all confidence, data_completeness, and missing_fields fields from platform | `claude/remove-confidence-fields-pQQEA` | 04:08 UTC |
| #197 | Add Contact Intelligence feature with comprehensive test suite | `claude/add-contact-intelligence-jBixR` | 04:52 UTC |
| #198 | Add ai-command-center edge function to config.toml | `claude/review-api-client-2UEk6` | 04:59 UTC |
| #199 | Data relationship audit: close FK gaps | `claude/data-relationship-audit-xjB3e` | 05:05 UTC |
| #200 | Fix 3 remaining remarketing_buyer_contacts references + SQL Editor audit script | `claude/audit-data-relationships-KwK2B` | 05:30 UTC |
| #201 | Add AI Chatbot test runner to Testing & Diagnostics hub | `claude/review-admin-testing-docs-Rc6ma` | 12:51 UTC |
| #202 | Fix chat-remarketing "Failed to fetch" + external API health checks | `claude/review-admin-testing-docs-Rc6ma` | 15:06 UTC |
| #203 | Fix scoring engine revenue quality + PhoneBurner integration overhaul | `claude/phoneburner-fixes-and-tests` | 15:25 UTC |
| #204 | Fix AI Command Center hallucination + industry query routing | `claude/review-admin-testing-docs-Rc6ma` | 15:33 UTC |
| #205 | Align AI Command Center with unified contacts + add behavioral rules | `claude/review-admin-testing-docs-Rc6ma` | 16:24 UTC |
| #206 | Automate QA scenario testing with Run All + auto-validation | `claude/review-admin-testing-docs-Rc6ma` | 16:56 UTC |
| #207 | Fix buyer import failures and remove auto-enrichment | `claude/fix-buyer-universe-loading-OHXUQ` | 17:09 UTC |
| #208 | Fix deal industry filtering, buyer search, contact lookup | `claude/deal-industry-filtering-JZKpl` | 17:13 UTC |
| #209 | Fix QA runner freeze + icon imports | `claude/review-admin-testing-docs-Rc6ma` | 17:15 UTC |
| #210 | Chat formatting rules, Rules & Guardrails admin tab, deep audit | `claude/review-admin-testing-docs-Rc6ma` | 18:46 UTC |
| #211 | Rebuild Buyer Contacts + contact lists + PhoneBurner export | `claude/review-phone-burner-Slo2U` | 19:43 UTC |
| #212 | Add back button to buyer messages + PRD integration tools | `claude/add-messaging-back-button-Z95xl` | 19:47 UTC |
| #213 | Document tracking admin + DocuSeal zoom + AI tool suite + universal search dedup fix | `claude/add-messaging-back-button-Z95xl` | 20:05 UTC |
| #214 | Add universal search feature (Cmd+K) | `claude/universal-search-feature-uddXt` | 20:15 UTC |
| #215 | SQL migration for AI tools schema fixes | `claude/review-admin-testing-docs-Rc6ma` | 20:27 UTC |
| #216 | Clarify document feedback options and improve signing modal UX | `claude/clarify-document-feedback-7lzUh` | 20:28 UTC |
| #217 | Rename "All Deals" to "Active Deals" throughout UI | `claude/rename-all-deals-active-y5X9T` | 20:33 UTC |
| #218 | Fix chatbot buyer search crash, token overflow, multi-state query | `claude/fix-buyer-search-error-HpFaN` | 20:39 UTC |
| #219 | Enforce valid company website for active deals + archive placeholders | `claude/investigate-deal-archiving-4n0cm` | 21:35 UTC |
| #220 | Add buyer to deal from deal detail page | `claude/add-buyer-to-deal-9ySco` | 21:36 UTC |
| #221 | Fix GP Partners approval: set remarketing_status=active + all_deals→active_deals | `claude/fix-gp-partners-approval-nQU91` | 21:39 UTC |
| #222 | Improve list creation and PhoneBurner export discoverability | `claude/track-list-export-RwdLX` | 22:08 UTC |
